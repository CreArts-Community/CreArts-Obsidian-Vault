"use strict";var ti=Object.create;var et=Object.defineProperty;var oi=Object.getOwnPropertyDescriptor;var ii=Object.getOwnPropertyNames;var ni=Object.getPrototypeOf,ri=Object.prototype.hasOwnProperty;var ai=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),si=(t,e)=>{for(var o in e)et(t,o,{get:e[o],enumerable:!0})},to=(t,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ii(e))!ri.call(t,n)&&n!==o&&et(t,n,{get:()=>e[n],enumerable:!(i=oi(e,n))||i.enumerable});return t};var li=(t,e,o)=>(o=t!=null?ti(ni(t)):{},to(e||!t||!t.__esModule?et(o,"default",{value:t,enumerable:!0}):o,t)),pi=t=>to(et({},"__esModule",{value:!0}),t);var xo=ai(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});var D=require("obsidian"),yt="YYYY-MM-DD",bt="gggg-[W]ww",so="YYYY-MM",lo="YYYY-[Q]Q",po="YYYY";function Fe(t){let e=window.app.plugins.getPlugin("periodic-notes");return e&&e.settings?.[t]?.enabled}function Ce(){try{let{internalPlugins:t,plugins:e}=window.app;if(Fe("daily")){let{format:r,folder:p,template:s}=e.getPlugin("periodic-notes")?.settings?.daily||{};return{format:r||yt,folder:p?.trim()||"",template:s?.trim()||""}}let{folder:o,format:i,template:n}=t.getPluginById("daily-notes")?.instance?.options||{};return{format:i||yt,folder:o?.trim()||"",template:n?.trim()||""}}catch(t){console.info("No custom daily note settings found!",t)}}function He(){try{let t=window.app.plugins,e=t.getPlugin("calendar")?.options,o=t.getPlugin("periodic-notes")?.settings?.weekly;if(Fe("weekly"))return{format:o.format||bt,folder:o.folder?.trim()||"",template:o.template?.trim()||""};let i=e||{};return{format:i.weeklyNoteFormat||bt,folder:i.weeklyNoteFolder?.trim()||"",template:i.weeklyNoteTemplate?.trim()||""}}catch(t){console.info("No custom weekly note settings found!",t)}}function Re(){let t=window.app.plugins;try{let e=Fe("monthly")&&t.getPlugin("periodic-notes")?.settings?.monthly||{};return{format:e.format||so,folder:e.folder?.trim()||"",template:e.template?.trim()||""}}catch(e){console.info("No custom monthly note settings found!",e)}}function Ie(){let t=window.app.plugins;try{let e=Fe("quarterly")&&t.getPlugin("periodic-notes")?.settings?.quarterly||{};return{format:e.format||lo,folder:e.folder?.trim()||"",template:e.template?.trim()||""}}catch(e){console.info("No custom quarterly note settings found!",e)}}function Ve(){let t=window.app.plugins;try{let e=Fe("yearly")&&t.getPlugin("periodic-notes")?.settings?.yearly||{};return{format:e.format||po,folder:e.folder?.trim()||"",template:e.template?.trim()||""}}catch(e){console.info("No custom yearly note settings found!",e)}}function co(...t){let e=[];for(let i=0,n=t.length;i<n;i++)e=e.concat(t[i].split("/"));let o=[];for(let i=0,n=e.length;i<n;i++){let r=e[i];!r||r==="."||o.push(r)}return e[0]===""&&o.unshift(""),o.join("/")}function ci(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}async function di(t){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let o=co(...e);window.app.vault.getAbstractFileByPath(o)||await window.app.vault.createFolder(o)}}async function We(t,e){e.endsWith(".md")||(e+=".md");let o=D.normalizePath(co(t,e));return await di(o),o}async function Ee(t){let{metadataCache:e,vault:o}=window.app,i=D.normalizePath(t);if(i==="/")return Promise.resolve(["",null]);try{let n=e.getFirstLinkpathDest(i,""),r=await o.cachedRead(n),p=window.app.foldManager.load(n);return[r,p]}catch(n){return console.error(`Failed to read the daily note template '${i}'`,n),new D.Notice("Failed to read the daily note template"),["",null]}}function Q(t,e="day"){let o=t.clone().startOf(e).format();return`${e}-${o}`}function uo(t){return t.replace(/\[[^\]]*\]/g,"")}function ui(t,e){if(e==="week"){let o=uo(t);return/w{1,2}/i.test(o)&&(/M{1,4}/.test(o)||/D{1,4}/.test(o))}return!1}function Oe(t,e){return mo(t.basename,e)}function mi(t,e){return mo(ci(t),e)}function mo(t,e){let i={day:Ce,week:He,month:Re,quarter:Ie,year:Ve}[e]().format.split("/").pop(),n=window.moment(t,i,!0);if(!n.isValid())return null;if(ui(i,e)&&e==="week"){let r=uo(i);if(/w{1,2}/i.test(r))return window.moment(t,i.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return n}var xt=class extends Error{};async function fo(t){let e=window.app,{vault:o}=e,i=window.moment,{template:n,format:r,folder:p}=Ce(),[s,a]=await Ee(n),l=t.format(r),c=await We(p,l);try{let g=await o.create(c,s.replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,i().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(v,d,w,m,u,f)=>{let P=i(),E=t.clone().set({hour:P.get("hour"),minute:P.get("minute"),second:P.get("second")});return w&&E.add(parseInt(m,10),u),f?E.format(f.substring(1).trim()):E.format(r)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(r)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(r)));return e.foldManager.save(g,a),g}catch(g){console.error(`Failed to create file: '${c}'`,g),new D.Notice("Unable to create new file.")}}function fi(t,e){return e[Q(t,"day")]??null}function gi(){let{vault:t}=window.app,{folder:e}=Ce(),o=t.getAbstractFileByPath(D.normalizePath(e));if(!o)throw new xt("Failed to find daily notes folder");let i={};return D.Vault.recurseChildren(o,n=>{if(n instanceof D.TFile){let r=Oe(n,"day");if(r){let p=Q(r,"day");i[p]=n}}}),i}var Pt=class extends Error{};function hi(){let{moment:t}=window,e=t.localeData()._week.dow,o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)o.push(o.shift()),e--;return o}function vi(t){return hi().indexOf(t.toLowerCase())}async function go(t){let{vault:e}=window.app,{template:o,format:i,folder:n}=He(),[r,p]=await Ee(o),s=t.format(i),a=await We(n,s);try{let l=await e.create(a,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,g,v,d,w,m)=>{let u=window.moment(),f=t.clone().set({hour:u.get("hour"),minute:u.get("minute"),second:u.get("second")});return v&&f.add(parseInt(d,10),w),m?f.format(m.substring(1).trim()):f.format(i)}).replace(/{{\s*title\s*}}/gi,s).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(c,g,v)=>{let d=vi(g);return t.weekday(d).format(v.trim())}));return window.app.foldManager.save(l,p),l}catch(l){console.error(`Failed to create file: '${a}'`,l),new D.Notice("Unable to create new file.")}}function wi(t,e){return e[Q(t,"week")]??null}function yi(){let t={};if(!vo())return t;let{vault:e}=window.app,{folder:o}=He(),i=e.getAbstractFileByPath(D.normalizePath(o));if(!i)throw new Pt("Failed to find weekly notes folder");return D.Vault.recurseChildren(i,n=>{if(n instanceof D.TFile){let r=Oe(n,"week");if(r){let p=Q(r,"week");t[p]=n}}}),t}var Et=class extends Error{};async function ho(t){let{vault:e}=window.app,{template:o,format:i,folder:n}=Re(),[r,p]=await Ee(o),s=t.format(i),a=await We(n,s);try{let l=await e.create(a,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,g,v,d,w,m)=>{let u=window.moment(),f=t.clone().set({hour:u.get("hour"),minute:u.get("minute"),second:u.get("second")});return v&&f.add(parseInt(d,10),w),m?f.format(m.substring(1).trim()):f.format(i)}).replace(/{{\s*date\s*}}/gi,s).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,s));return window.app.foldManager.save(l,p),l}catch(l){console.error(`Failed to create file: '${a}'`,l),new D.Notice("Unable to create new file.")}}function bi(t,e){return e[Q(t,"month")]??null}function xi(){let t={};if(!wo())return t;let{vault:e}=window.app,{folder:o}=Re(),i=e.getAbstractFileByPath(D.normalizePath(o));if(!i)throw new Et("Failed to find monthly notes folder");return D.Vault.recurseChildren(i,n=>{if(n instanceof D.TFile){let r=Oe(n,"month");if(r){let p=Q(r,"month");t[p]=n}}}),t}var Ot=class extends Error{};async function Pi(t){let{vault:e}=window.app,{template:o,format:i,folder:n}=Ie(),[r,p]=await Ee(o),s=t.format(i),a=await We(n,s);try{let l=await e.create(a,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,g,v,d,w,m)=>{let u=window.moment(),f=t.clone().set({hour:u.get("hour"),minute:u.get("minute"),second:u.get("second")});return v&&f.add(parseInt(d,10),w),m?f.format(m.substring(1).trim()):f.format(i)}).replace(/{{\s*date\s*}}/gi,s).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,s));return window.app.foldManager.save(l,p),l}catch(l){console.error(`Failed to create file: '${a}'`,l),new D.Notice("Unable to create new file.")}}function Ei(t,e){return e[Q(t,"quarter")]??null}function Oi(){let t={};if(!yo())return t;let{vault:e}=window.app,{folder:o}=Ie(),i=e.getAbstractFileByPath(D.normalizePath(o));if(!i)throw new Ot("Failed to find quarterly notes folder");return D.Vault.recurseChildren(i,n=>{if(n instanceof D.TFile){let r=Oe(n,"quarter");if(r){let p=Q(r,"quarter");t[p]=n}}}),t}var Nt=class extends Error{};async function Ni(t){let{vault:e}=window.app,{template:o,format:i,folder:n}=Ve(),[r,p]=await Ee(o),s=t.format(i),a=await We(n,s);try{let l=await e.create(a,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,g,v,d,w,m)=>{let u=window.moment(),f=t.clone().set({hour:u.get("hour"),minute:u.get("minute"),second:u.get("second")});return v&&f.add(parseInt(d,10),w),m?f.format(m.substring(1).trim()):f.format(i)}).replace(/{{\s*date\s*}}/gi,s).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,s));return window.app.foldManager.save(l,p),l}catch(l){console.error(`Failed to create file: '${a}'`,l),new D.Notice("Unable to create new file.")}}function Ti(t,e){return e[Q(t,"year")]??null}function Si(){let t={};if(!bo())return t;let{vault:e}=window.app,{folder:o}=Ve(),i=e.getAbstractFileByPath(D.normalizePath(o));if(!i)throw new Nt("Failed to find yearly notes folder");return D.Vault.recurseChildren(i,n=>{if(n instanceof D.TFile){let r=Oe(n,"year");if(r){let p=Q(r,"year");t[p]=n}}}),t}function Di(){let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let o=t.plugins.getPlugin("periodic-notes");return o&&o.settings?.daily?.enabled}function vo(){let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.weekly?.enabled}function wo(){let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.monthly?.enabled}function yo(){let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.quarterly?.enabled}function bo(){let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.yearly?.enabled}function Mi(t){let e={day:Ce,week:He,month:Re,quarter:Ie,year:Ve}[t];return e()}function ki(t,e){return{day:fo,month:ho,week:go}[t](e)}h.DEFAULT_DAILY_NOTE_FORMAT=yt;h.DEFAULT_MONTHLY_NOTE_FORMAT=so;h.DEFAULT_QUARTERLY_NOTE_FORMAT=lo;h.DEFAULT_WEEKLY_NOTE_FORMAT=bt;h.DEFAULT_YEARLY_NOTE_FORMAT=po;h.appHasDailyNotesPluginLoaded=Di;h.appHasMonthlyNotesPluginLoaded=wo;h.appHasQuarterlyNotesPluginLoaded=yo;h.appHasWeeklyNotesPluginLoaded=vo;h.appHasYearlyNotesPluginLoaded=bo;h.createDailyNote=fo;h.createMonthlyNote=ho;h.createPeriodicNote=ki;h.createQuarterlyNote=Pi;h.createWeeklyNote=go;h.createYearlyNote=Ni;h.getAllDailyNotes=gi;h.getAllMonthlyNotes=xi;h.getAllQuarterlyNotes=Oi;h.getAllWeeklyNotes=yi;h.getAllYearlyNotes=Si;h.getDailyNote=fi;h.getDailyNoteSettings=Ce;h.getDateFromFile=Oe;h.getDateFromPath=mi;h.getDateUID=Q;h.getMonthlyNote=bi;h.getMonthlyNoteSettings=Re;h.getPeriodicNoteSettings=Mi;h.getQuarterlyNote=Ei;h.getQuarterlyNoteSettings=Ie;h.getTemplateInfo=Ee;h.getWeeklyNote=wi;h.getWeeklyNoteSettings=He;h.getYearlyNote=Ti;h.getYearlyNoteSettings=Ve});var mn={};si(mn,{default:()=>ft});module.exports=pi(mn);var se=require("obsidian");var Y=require("obsidian");var Po=require("obsidian");var oo=require("obsidian");function ee(t){return t?t.extension=="md"?t.path.slice(0,-3):t.path:""}function io(t){return t.endsWith(".canvas")?t:`${t}.md`}function no(t,e){return(t%e+e)%e}function ro(t){let e=t.vault.getFiles().filter(o=>["md","canvas"].contains(o.extension));if(e.length){let o=Math.floor(Math.random()*e.length);return ee(e[o])}}function ao(t){return t.workspace.getActiveViewOfType(oo.View)?.getViewType()=="empty"}var N=li(xo()),Tt={["Daily Note"]:{noun:"day",adjective:"daily",create:N.createDailyNote,get:N.getDailyNote,getAll:N.getAllDailyNotes},["Weekly Note"]:{noun:"week",adjective:"weekly",create:N.createWeeklyNote,get:N.getWeeklyNote,getAll:N.getAllWeeklyNotes},["Monthly Note"]:{noun:"month",adjective:"monthly",create:N.createMonthlyNote,get:N.getMonthlyNote,getAll:N.getAllMonthlyNotes},["Yearly Note"]:{noun:"year",adjective:"yearly",create:N.createYearlyNote,get:N.getYearlyNote,getAll:N.getAllYearlyNotes}},St=["Daily Note","Weekly Note","Monthly Note","Yearly Note"];async function Eo(t,e){let o=e.communityPlugins["periodic-notes"],i=Tt[t],n=(0,Po.moment)().startOf(i.noun),r;if(No(o)){let p=i.getAll();Object.keys(p).length?r=i.get(n,p)||await i.create(n):r=await i.create(n)}else o.cache.initialize(),r=o.getPeriodicNote(i.noun,n)||await o.createPeriodicNote(i.noun,n);return ee(r)}function Oo(t,e){if(t=="Daily Note"&&e.internalPlugins["daily-notes"]?.enabled)return!0;let o=e.communityPlugins["periodic-notes"];if(!o)return!1;if(No(o)){let i=Tt[t].adjective;return e.communityPlugins["periodic-notes"].settings[i]?.enabled}else{let i=Tt[t].noun;return e.communityPlugins["periodic-notes"]?.calendarSetManager?.getActiveSet()[i]?.enabled}}function tt(t){let e=t.internalPlugins["daily-notes"];return e?.enabled&&e?.instance.options.autorun}function No(t){return(t?.manifest.version||"0").startsWith("0")}var To=["markdown","canvas","kanban"],me="Main Homepage",ot="Mobile Homepage",it=(i=>(i.ReplaceAll="Replace all open notes",i.ReplaceLast="Replace last note",i.Retain="Keep open notes",i))(it||{}),Dt=(n=>(n.Default="Default view",n.Reading="Reading view",n.Source="Editing view (Source)",n.LivePreview="Editing view (Live Preview)",n))(Dt||{}),_e=(l=>(l.File="File",l.Workspace="Workspace",l.Random="Random file",l.Graph="Graph view",l.DailyNote="Daily Note",l.WeeklyNote="Weekly Note",l.MonthlyNote="Monthly Note",l.YearlyNote="Yearly Note",l.MomentDate="Date-dependent file",l))(_e||{}),Be=class{constructor(e,o){this.lastView=void 0;this.openedViews=new WeakMap;this.name=e,this.plugin=o,this.app=o.app,this.data=o.settings.homepages[e],this.data.commands||(this.data.commands=[],this.save())}async open(e=!1){if(this.plugin.hasRequiredPlugin(this.data.kind))if(this.data.kind=="Workspace")await this.launchWorkspace();else{let o=this.plugin.loaded?this.data.manualOpenMode:this.data.openMode;e&&(o="Keep open notes"),await this.launchLeaf(o)}else{new Y.Notice("Homepage cannot be opened due to plugin unavailablity.");return}if(this.data.commands)for(let o of this.data.commands)this.app.commands.executeCommandById(o)}async launchWorkspace(){let e=this.plugin.internalPlugins.workspaces?.instance;if(!(this.data.value in e.workspaces)){new Y.Notice(`Cannot find the workspace "${this.data.value}" to use as the homepage.`);return}e.loadWorkspace(this.data.value)}async launchLeaf(e){if(this.computedValue=await this.computeValue(),this.plugin.executing=!0,!(tt(this.plugin)&&!this.plugin.loaded)){if(!this.data.autoCreate&&await this.isNonextant()){new Y.Notice(`Homepage "${this.computedValue}" does not exist.`);return}if(e!="Replace all open notes"){let o=this.getOpened();if(o.length>0){this.app.workspace.setActiveLeaf(o[0]),await this.configure();return}else e=="Keep open notes"&&ao(this.app)&&(e="Replace last note")}else To.forEach(o=>this.app.workspace.detachLeavesOfType(o));e!="Keep open notes"&&this.app.workspace.getActiveViewOfType(Y.View)?.leaf.setPinned(!1),this.data.kind==="Graph view"?await this.launchGraph(e):await this.launchNote(e),await this.configure()}}async launchGraph(e){if(e==="Keep open notes"){let o=this.app.workspace.getLeaf("tab");this.app.workspace.setActiveLeaf(o)}this.app.commands.executeCommandById("graph:open")}async launchNote(e){do await this.app.workspace.openLinkText(this.computedValue,"",e=="Keep open notes",{active:!0});while(this.app.workspace.getActiveFile()==null);e=="Replace all open notes"&&this.app.workspace.detachLeavesOfType("empty")}async isNonextant(){let e=io(this.computedValue);return!await this.app.vault.adapter.exists(e)}async configure(){this.plugin.executing=!1;let e=this.app.workspace.getActiveViewOfType(Y.MarkdownView);if(!e){this.data.pin&&this.app.workspace.getActiveViewOfType(Y.View)?.leaf.setPinned(!0);return}let o=e.getState();if(this.data.revertView&&(this.lastView=new WeakRef(e)),this.data.autoScroll){let i=e.editor.lineCount();o.mode=="preview"?e.previewMode.applyScroll(i-4):(e.editor.setCursor(i),e.editor.focus())}if(this.data.pin&&e.leaf.setPinned(!0),this.data.view!="Default view"){switch(this.data.view){case"Editing view (Live Preview)":case"Editing view (Source)":o.mode="source",o.source=this.data.view!="Editing view (Live Preview)";break;case"Reading view":o.mode="preview";break}await e.leaf.setViewState({type:"markdown",state:o}),this.plugin.loaded&&this.data.refreshDataview&&this.plugin.communityPlugins.dataview?.index.touch()}}getOpened(){return this.data.kind=="Graph view"?this.app.workspace.getLeavesOfType("graph"):To.flatMap(o=>this.app.workspace.getLeavesOfType(o)).filter(o=>ee(o.view.file)==this.computedValue)}async computeValue(){let e=this.data.value;switch(this.data.kind){case"Date-dependent file":e=(0,Y.moment)().format(this.data.value);break;case"Random file":let o=ro(this.app);o&&(e=o);break;case"Daily Note":case"Weekly Note":case"Monthly Note":case"Yearly Note":e=await Eo(this.data.kind,this.plugin);break}return e}async save(){this.plugin.settings.homepages[this.name]=this.data,await this.plugin.saveSettings()}async revertView(){if(this.lastView==null||this.data.view=="Default view")return;let e=this.lastView.deref();if(!e||ee(e.file)==this.computedValue)return;let o=e.getState(),i=this.app.vault.config,n=i.defaultViewMode||"source",r=!i.livePreview||!1;(n!=o.mode||r!=o.source)&&(o.mode=n,o.source=r,await e.leaf.setViewState({type:"markdown",state:o,active:!0})),this.lastView=void 0}async openWhenEmpty(){if(!this.plugin.loaded)return;let e=this.app.workspace.getActiveViewOfType(Y.View)?.leaf;e?.getViewState().type!=="empty"||e?.parentSplit.children.length!=1||await this.open()}async apply(){let e=this.app.workspace.getActiveViewOfType(Y.FileView);if(!e)return;let o=ee(e.file);this.openedViews.get(e)!==o&&(this.openedViews.set(e,o),o===await this.computeValue()&&this.plugin.loaded&&!this.plugin.executing&&await this.configure())}};var W=require("obsidian");var ke=require("obsidian");var Ko=require("obsidian");var M="top",H="bottom",A="right",k="left",nt="auto",re=[M,H,A,k],te="start",fe="end",So="clippingParents",rt="viewport",Ne="popper",Do="reference",Mt=re.reduce(function(t,e){return t.concat([e+"-"+te,e+"-"+fe])},[]),at=[].concat(re,[nt]).reduce(function(t,e){return t.concat([e,e+"-"+te,e+"-"+fe])},[]),Ai="beforeRead",Li="read",Fi="afterRead",Ci="beforeMain",Hi="main",Ri="afterMain",Ii="beforeWrite",Vi="write",Wi="afterWrite",Mo=[Ai,Li,Fi,Ci,Hi,Ri,Ii,Vi,Wi];function I(t){return t?(t.nodeName||"").toLowerCase():null}function T(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function U(t){var e=T(t).Element;return t instanceof e||t instanceof Element}function R(t){var e=T(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Te(t){if(typeof ShadowRoot>"u")return!1;var e=T(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function _i(t){var e=t.state;Object.keys(e.elements).forEach(function(o){var i=e.styles[o]||{},n=e.attributes[o]||{},r=e.elements[o];!R(r)||!I(r)||(Object.assign(r.style,i),Object.keys(n).forEach(function(p){var s=n[p];s===!1?r.removeAttribute(p):r.setAttribute(p,s===!0?"":s)}))})}function Bi(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],r=e.attributes[i]||{},p=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:o[i]),s=p.reduce(function(a,l){return a[l]="",a},{});!R(n)||!I(n)||(Object.assign(n.style,s),Object.keys(r).forEach(function(a){n.removeAttribute(a)}))})}}var ko={name:"applyStyles",enabled:!0,phase:"write",fn:_i,effect:Bi,requires:["computeStyles"]};function V(t){return t.split("-")[0]}var X=Math.max,ge=Math.min,oe=Math.round;function Se(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function je(){return!/^((?!chrome|android).)*safari/i.test(Se())}function z(t,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var i=t.getBoundingClientRect(),n=1,r=1;e&&R(t)&&(n=t.offsetWidth>0&&oe(i.width)/t.offsetWidth||1,r=t.offsetHeight>0&&oe(i.height)/t.offsetHeight||1);var p=U(t)?T(t):window,s=p.visualViewport,a=!je()&&o,l=(i.left+(a&&s?s.offsetLeft:0))/n,c=(i.top+(a&&s?s.offsetTop:0))/r,g=i.width/n,v=i.height/r;return{width:g,height:v,top:c,right:l+g,bottom:c+v,left:l,x:l,y:c}}function he(t){var e=z(t),o=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:o,height:i}}function Ye(t,e){var o=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(o&&Te(o)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function j(t){return T(t).getComputedStyle(t)}function kt(t){return["table","td","th"].indexOf(I(t))>=0}function _(t){return((U(t)?t.ownerDocument:t.document)||window.document).documentElement}function ie(t){return I(t)==="html"?t:t.assignedSlot||t.parentNode||(Te(t)?t.host:null)||_(t)}function Ao(t){return!R(t)||j(t).position==="fixed"?null:t.offsetParent}function ji(t){var e=/firefox/i.test(Se()),o=/Trident/i.test(Se());if(o&&R(t)){var i=j(t);if(i.position==="fixed")return null}var n=ie(t);for(Te(n)&&(n=n.host);R(n)&&["html","body"].indexOf(I(n))<0;){var r=j(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function J(t){for(var e=T(t),o=Ao(t);o&&kt(o)&&j(o).position==="static";)o=Ao(o);return o&&(I(o)==="html"||I(o)==="body"&&j(o).position==="static")?e:o||ji(t)||e}function ve(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function we(t,e,o){return X(t,ge(e,o))}function Lo(t,e,o){var i=we(t,e,o);return i>o?o:i}function $e(){return{top:0,right:0,bottom:0,left:0}}function qe(t){return Object.assign({},$e(),t)}function Ue(t,e){return e.reduce(function(o,i){return o[i]=t,o},{})}var Yi=function(e,o){return e=typeof e=="function"?e(Object.assign({},o.rects,{placement:o.placement})):e,qe(typeof e!="number"?e:Ue(e,re))};function $i(t){var e,o=t.state,i=t.name,n=t.options,r=o.elements.arrow,p=o.modifiersData.popperOffsets,s=V(o.placement),a=ve(s),l=[k,A].indexOf(s)>=0,c=l?"height":"width";if(!(!r||!p)){var g=Yi(n.padding,o),v=he(r),d=a==="y"?M:k,w=a==="y"?H:A,m=o.rects.reference[c]+o.rects.reference[a]-p[a]-o.rects.popper[c],u=p[a]-o.rects.reference[a],f=J(r),P=f?a==="y"?f.clientHeight||0:f.clientWidth||0:0,E=m/2-u/2,y=g[d],b=P-v[c]-g[w],x=P/2-v[c]/2+E,S=we(y,x,b),L=a;o.modifiersData[i]=(e={},e[L]=S,e.centerOffset=S-x,e)}}function qi(t){var e=t.state,o=t.options,i=o.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||Ye(e.elements.popper,n)&&(e.elements.arrow=n))}var Fo={name:"arrow",enabled:!0,phase:"main",fn:$i,effect:qi,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function K(t){return t.split("-")[1]}var Ui={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zi(t,e){var o=t.x,i=t.y,n=e.devicePixelRatio||1;return{x:oe(o*n)/n||0,y:oe(i*n)/n||0}}function Co(t){var e,o=t.popper,i=t.popperRect,n=t.placement,r=t.variation,p=t.offsets,s=t.position,a=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,g=t.isFixed,v=p.x,d=v===void 0?0:v,w=p.y,m=w===void 0?0:w,u=typeof c=="function"?c({x:d,y:m}):{x:d,y:m};d=u.x,m=u.y;var f=p.hasOwnProperty("x"),P=p.hasOwnProperty("y"),E=k,y=M,b=window;if(l){var x=J(o),S="clientHeight",L="clientWidth";if(x===T(o)&&(x=_(o),j(x).position!=="static"&&s==="absolute"&&(S="scrollHeight",L="scrollWidth")),x=x,n===M||(n===k||n===A)&&r===fe){y=H;var F=g&&x===b&&b.visualViewport?b.visualViewport.height:x[S];m-=F-i.height,m*=a?1:-1}if(n===k||(n===M||n===H)&&r===fe){E=A;var C=g&&x===b&&b.visualViewport?b.visualViewport.width:x[L];d-=C-i.width,d*=a?1:-1}}var O=Object.assign({position:s},l&&Ui),$=c===!0?zi({x:d,y:m},T(o)):{x:d,y:m};if(d=$.x,m=$.y,a){var B;return Object.assign({},O,(B={},B[y]=P?"0":"",B[E]=f?"0":"",B.transform=(b.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",B))}return Object.assign({},O,(e={},e[y]=P?m+"px":"",e[E]=f?d+"px":"",e.transform="",e))}function Ki(t){var e=t.state,o=t.options,i=o.gpuAcceleration,n=i===void 0?!0:i,r=o.adaptive,p=r===void 0?!0:r,s=o.roundOffsets,a=s===void 0?!0:s;if(!1)var l;var c={placement:V(e.placement),variation:K(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Co(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:p,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Co(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Ho={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ki,data:{}};var st={passive:!0};function Gi(t){var e=t.state,o=t.instance,i=t.options,n=i.scroll,r=n===void 0?!0:n,p=i.resize,s=p===void 0?!0:p,a=T(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&l.forEach(function(c){c.addEventListener("scroll",o.update,st)}),s&&a.addEventListener("resize",o.update,st),function(){r&&l.forEach(function(c){c.removeEventListener("scroll",o.update,st)}),s&&a.removeEventListener("resize",o.update,st)}}var Ro={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gi,data:{}};var Qi={left:"right",right:"left",bottom:"top",top:"bottom"};function De(t){return t.replace(/left|right|bottom|top/g,function(e){return Qi[e]})}var Xi={start:"end",end:"start"};function lt(t){return t.replace(/start|end/g,function(e){return Xi[e]})}function ye(t){var e=T(t),o=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:o,scrollTop:i}}function be(t){return z(_(t)).left+ye(t).scrollLeft}function At(t,e){var o=T(t),i=_(t),n=o.visualViewport,r=i.clientWidth,p=i.clientHeight,s=0,a=0;if(n){r=n.width,p=n.height;var l=je();(l||!l&&e==="fixed")&&(s=n.offsetLeft,a=n.offsetTop)}return{width:r,height:p,x:s+be(t),y:a}}function Lt(t){var e,o=_(t),i=ye(t),n=(e=t.ownerDocument)==null?void 0:e.body,r=X(o.scrollWidth,o.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),p=X(o.scrollHeight,o.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),s=-i.scrollLeft+be(t),a=-i.scrollTop;return j(n||o).direction==="rtl"&&(s+=X(o.clientWidth,n?n.clientWidth:0)-r),{width:r,height:p,x:s,y:a}}function xe(t){var e=j(t),o=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+n+i)}function pt(t){return["html","body","#document"].indexOf(I(t))>=0?t.ownerDocument.body:R(t)&&xe(t)?t:pt(ie(t))}function ae(t,e){var o;e===void 0&&(e=[]);var i=pt(t),n=i===((o=t.ownerDocument)==null?void 0:o.body),r=T(i),p=n?[r].concat(r.visualViewport||[],xe(i)?i:[]):i,s=e.concat(p);return n?s:s.concat(ae(ie(p)))}function Me(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ji(t,e){var o=z(t,!1,e==="fixed");return o.top=o.top+t.clientTop,o.left=o.left+t.clientLeft,o.bottom=o.top+t.clientHeight,o.right=o.left+t.clientWidth,o.width=t.clientWidth,o.height=t.clientHeight,o.x=o.left,o.y=o.top,o}function Io(t,e,o){return e===rt?Me(At(t,o)):U(e)?Ji(e,o):Me(Lt(_(t)))}function Zi(t){var e=ae(ie(t)),o=["absolute","fixed"].indexOf(j(t).position)>=0,i=o&&R(t)?J(t):t;return U(i)?e.filter(function(n){return U(n)&&Ye(n,i)&&I(n)!=="body"}):[]}function Ft(t,e,o,i){var n=e==="clippingParents"?Zi(t):[].concat(e),r=[].concat(n,[o]),p=r[0],s=r.reduce(function(a,l){var c=Io(t,l,i);return a.top=X(c.top,a.top),a.right=ge(c.right,a.right),a.bottom=ge(c.bottom,a.bottom),a.left=X(c.left,a.left),a},Io(t,p,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ze(t){var e=t.reference,o=t.element,i=t.placement,n=i?V(i):null,r=i?K(i):null,p=e.x+e.width/2-o.width/2,s=e.y+e.height/2-o.height/2,a;switch(n){case M:a={x:p,y:e.y-o.height};break;case H:a={x:p,y:e.y+e.height};break;case A:a={x:e.x+e.width,y:s};break;case k:a={x:e.x-o.width,y:s};break;default:a={x:e.x,y:e.y}}var l=n?ve(n):null;if(l!=null){var c=l==="y"?"height":"width";switch(r){case te:a[l]=a[l]-(e[c]/2-o[c]/2);break;case fe:a[l]=a[l]+(e[c]/2-o[c]/2);break;default:}}return a}function Z(t,e){e===void 0&&(e={});var o=e,i=o.placement,n=i===void 0?t.placement:i,r=o.strategy,p=r===void 0?t.strategy:r,s=o.boundary,a=s===void 0?So:s,l=o.rootBoundary,c=l===void 0?rt:l,g=o.elementContext,v=g===void 0?Ne:g,d=o.altBoundary,w=d===void 0?!1:d,m=o.padding,u=m===void 0?0:m,f=qe(typeof u!="number"?u:Ue(u,re)),P=v===Ne?Do:Ne,E=t.rects.popper,y=t.elements[w?P:v],b=Ft(U(y)?y:y.contextElement||_(t.elements.popper),a,c,p),x=z(t.elements.reference),S=ze({reference:x,element:E,strategy:"absolute",placement:n}),L=Me(Object.assign({},E,S)),F=v===Ne?L:x,C={top:b.top-F.top+f.top,bottom:F.bottom-b.bottom+f.bottom,left:b.left-F.left+f.left,right:F.right-b.right+f.right},O=t.modifiersData.offset;if(v===Ne&&O){var $=O[n];Object.keys(C).forEach(function(B){var le=[A,H].indexOf(B)>=0?1:-1,pe=[M,H].indexOf(B)>=0?"y":"x";C[B]+=$[pe]*le})}return C}function Ct(t,e){e===void 0&&(e={});var o=e,i=o.placement,n=o.boundary,r=o.rootBoundary,p=o.padding,s=o.flipVariations,a=o.allowedAutoPlacements,l=a===void 0?at:a,c=K(i),g=c?s?Mt:Mt.filter(function(w){return K(w)===c}):re,v=g.filter(function(w){return l.indexOf(w)>=0});v.length===0&&(v=g);var d=v.reduce(function(w,m){return w[m]=Z(t,{placement:m,boundary:n,rootBoundary:r,padding:p})[V(m)],w},{});return Object.keys(d).sort(function(w,m){return d[w]-d[m]})}function en(t){if(V(t)===nt)return[];var e=De(t);return[lt(t),e,lt(e)]}function tn(t){var e=t.state,o=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var n=o.mainAxis,r=n===void 0?!0:n,p=o.altAxis,s=p===void 0?!0:p,a=o.fallbackPlacements,l=o.padding,c=o.boundary,g=o.rootBoundary,v=o.altBoundary,d=o.flipVariations,w=d===void 0?!0:d,m=o.allowedAutoPlacements,u=e.options.placement,f=V(u),P=f===u,E=a||(P||!w?[De(u)]:en(u)),y=[u].concat(E).reduce(function(Pe,ne){return Pe.concat(V(ne)===nt?Ct(e,{placement:ne,boundary:c,rootBoundary:g,padding:l,flipVariations:w,allowedAutoPlacements:m}):ne)},[]),b=e.rects.reference,x=e.rects.popper,S=new Map,L=!0,F=y[0],C=0;C<y.length;C++){var O=y[C],$=V(O),B=K(O)===te,le=[M,H].indexOf($)>=0,pe=le?"width":"height",q=Z(e,{placement:O,boundary:c,rootBoundary:g,altBoundary:v,padding:l}),G=le?B?A:k:B?H:M;b[pe]>x[pe]&&(G=De(G));var Ge=De(G),ce=[];if(r&&ce.push(q[$]<=0),s&&ce.push(q[G]<=0,q[Ge]<=0),ce.every(function(Pe){return Pe})){F=O,L=!1;break}S.set(O,ce)}if(L)for(var Qe=w?3:1,gt=function(ne){var Le=y.find(function(Je){var de=S.get(Je);if(de)return de.slice(0,ne).every(function(ht){return ht})});if(Le)return F=Le,"break"},Ae=Qe;Ae>0;Ae--){var Xe=gt(Ae);if(Xe==="break")break}e.placement!==F&&(e.modifiersData[i]._skip=!0,e.placement=F,e.reset=!0)}}var Vo={name:"flip",enabled:!0,phase:"main",fn:tn,requiresIfExists:["offset"],data:{_skip:!1}};function Wo(t,e,o){return o===void 0&&(o={x:0,y:0}),{top:t.top-e.height-o.y,right:t.right-e.width+o.x,bottom:t.bottom-e.height+o.y,left:t.left-e.width-o.x}}function _o(t){return[M,A,H,k].some(function(e){return t[e]>=0})}function on(t){var e=t.state,o=t.name,i=e.rects.reference,n=e.rects.popper,r=e.modifiersData.preventOverflow,p=Z(e,{elementContext:"reference"}),s=Z(e,{altBoundary:!0}),a=Wo(p,i),l=Wo(s,n,r),c=_o(a),g=_o(l);e.modifiersData[o]={referenceClippingOffsets:a,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":g})}var Bo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:on};function nn(t,e,o){var i=V(t),n=[k,M].indexOf(i)>=0?-1:1,r=typeof o=="function"?o(Object.assign({},e,{placement:t})):o,p=r[0],s=r[1];return p=p||0,s=(s||0)*n,[k,A].indexOf(i)>=0?{x:s,y:p}:{x:p,y:s}}function rn(t){var e=t.state,o=t.options,i=t.name,n=o.offset,r=n===void 0?[0,0]:n,p=at.reduce(function(c,g){return c[g]=nn(g,e.rects,r),c},{}),s=p[e.placement],a=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=p}var jo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rn};function an(t){var e=t.state,o=t.name;e.modifiersData[o]=ze({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Yo={name:"popperOffsets",enabled:!0,phase:"read",fn:an,data:{}};function Ht(t){return t==="x"?"y":"x"}function sn(t){var e=t.state,o=t.options,i=t.name,n=o.mainAxis,r=n===void 0?!0:n,p=o.altAxis,s=p===void 0?!1:p,a=o.boundary,l=o.rootBoundary,c=o.altBoundary,g=o.padding,v=o.tether,d=v===void 0?!0:v,w=o.tetherOffset,m=w===void 0?0:w,u=Z(e,{boundary:a,rootBoundary:l,padding:g,altBoundary:c}),f=V(e.placement),P=K(e.placement),E=!P,y=ve(f),b=Ht(y),x=e.modifiersData.popperOffsets,S=e.rects.reference,L=e.rects.popper,F=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,C=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(x){if(r){var B,le=y==="y"?M:k,pe=y==="y"?H:A,q=y==="y"?"height":"width",G=x[y],Ge=G+u[le],ce=G-u[pe],Qe=d?-L[q]/2:0,gt=P===te?S[q]:L[q],Ae=P===te?-L[q]:-S[q],Xe=e.elements.arrow,Pe=d&&Xe?he(Xe):{width:0,height:0},ne=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$e(),Le=ne[le],Je=ne[pe],de=we(0,S[q],Pe[q]),ht=E?S[q]/2-Qe-de-Le-C.mainAxis:gt-de-Le-C.mainAxis,Go=E?-S[q]/2+Qe+de+Je+C.mainAxis:Ae+de+Je+C.mainAxis,vt=e.elements.arrow&&J(e.elements.arrow),Qo=vt?y==="y"?vt.clientTop||0:vt.clientLeft||0:0,Ut=(B=O?.[y])!=null?B:0,Xo=G+ht-Ut-Qo,Jo=G+Go-Ut,zt=we(d?ge(Ge,Xo):Ge,G,d?X(ce,Jo):ce);x[y]=zt,$[y]=zt-G}if(s){var Kt,Zo=y==="x"?M:k,ei=y==="x"?H:A,ue=x[b],Ze=b==="y"?"height":"width",Gt=ue+u[Zo],Qt=ue-u[ei],wt=[M,k].indexOf(f)!==-1,Xt=(Kt=O?.[b])!=null?Kt:0,Jt=wt?Gt:ue-S[Ze]-L[Ze]-Xt+C.altAxis,Zt=wt?ue+S[Ze]+L[Ze]-Xt-C.altAxis:Qt,eo=d&&wt?Lo(Jt,ue,Zt):we(d?Jt:Gt,ue,d?Zt:Qt);x[b]=eo,$[b]=eo-ue}e.modifiersData[i]=$}}var $o={name:"preventOverflow",enabled:!0,phase:"main",fn:sn,requiresIfExists:["offset"]};function Rt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function It(t){return t===T(t)||!R(t)?ye(t):Rt(t)}function ln(t){var e=t.getBoundingClientRect(),o=oe(e.width)/t.offsetWidth||1,i=oe(e.height)/t.offsetHeight||1;return o!==1||i!==1}function Vt(t,e,o){o===void 0&&(o=!1);var i=R(e),n=R(e)&&ln(e),r=_(e),p=z(t,n,o),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!o)&&((I(e)!=="body"||xe(r))&&(s=It(e)),R(e)?(a=z(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):r&&(a.x=be(r))),{x:p.left+s.scrollLeft-a.x,y:p.top+s.scrollTop-a.y,width:p.width,height:p.height}}function pn(t){var e=new Map,o=new Set,i=[];t.forEach(function(r){e.set(r.name,r)});function n(r){o.add(r.name);var p=[].concat(r.requires||[],r.requiresIfExists||[]);p.forEach(function(s){if(!o.has(s)){var a=e.get(s);a&&n(a)}}),i.push(r)}return t.forEach(function(r){o.has(r.name)||n(r)}),i}function Wt(t){var e=pn(t);return Mo.reduce(function(o,i){return o.concat(e.filter(function(n){return n.phase===i}))},[])}function _t(t){var e;return function(){return e||(e=new Promise(function(o){Promise.resolve().then(function(){e=void 0,o(t())})})),e}}function Bt(t){var e=t.reduce(function(o,i){var n=o[i.name];return o[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,o},{});return Object.keys(e).map(function(o){return e[o]})}var qo={placement:"bottom",modifiers:[],strategy:"absolute"};function Uo(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function zo(t){t===void 0&&(t={});var e=t,o=e.defaultModifiers,i=o===void 0?[]:o,n=e.defaultOptions,r=n===void 0?qo:n;return function(s,a,l){l===void 0&&(l=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},qo,r),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},g=[],v=!1,d={state:c,setOptions:function(f){var P=typeof f=="function"?f(c.options):f;m(),c.options=Object.assign({},r,c.options,P),c.scrollParents={reference:U(s)?ae(s):s.contextElement?ae(s.contextElement):[],popper:ae(a)};var E=Wt(Bt([].concat(i,c.options.modifiers)));if(c.orderedModifiers=E.filter(function(O){return O.enabled}),!1){var y;if(getBasePlacement(c.options.placement)===auto)var b;var x,S,L,F,C}return w(),d.update()},forceUpdate:function(){if(!v){var f=c.elements,P=f.reference,E=f.popper;if(Uo(P,E)){c.rects={reference:Vt(P,J(E),c.options.strategy==="fixed"),popper:he(E)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var y=0,b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var x=c.orderedModifiers[b],S=x.fn,L=x.options,F=L===void 0?{}:L,C=x.name;typeof S=="function"&&(c=S({state:c,options:F,name:C,instance:d})||c)}}}},update:_t(function(){return new Promise(function(u){d.forceUpdate(),u(c)})}),destroy:function(){m(),v=!0}};if(!Uo(s,a))return d;d.setOptions(l).then(function(u){!v&&l.onFirstUpdate&&l.onFirstUpdate(u)});function w(){c.orderedModifiers.forEach(function(u){var f=u.name,P=u.options,E=P===void 0?{}:P,y=u.effect;if(typeof y=="function"){var b=y({state:c,name:f,instance:d,options:E}),x=function(){};g.push(b||x)}})}function m(){g.forEach(function(u){return u()}),g=[]}return d}}var cn=[Ro,Yo,Ho,ko,jo,Vo,$o,Fo,Bo],jt=zo({defaultModifiers:cn});var Yt=class{constructor(e,o,i){this.owner=e,this.containerEl=o,o.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),o.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),i.register([],"ArrowUp",n=>{if(!n.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),i.register([],"ArrowDown",n=>{if(!n.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),i.register([],"Enter",n=>{if(!n.isComposing)return this.useSelectedItem(n),!1})}onSuggestionClick(e,o){e.preventDefault();let i=this.suggestions.indexOf(o);this.setSelectedItem(i,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,o){let i=this.suggestions.indexOf(o);this.setSelectedItem(i,!1)}setSuggestions(e){this.containerEl.empty();let o=[];e.forEach(i=>{let n=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(i,n),o.push(n)}),this.values=e,this.suggestions=o,this.setSelectedItem(0,!1)}useSelectedItem(e){let o=this.values[this.selectedItem];o&&this.owner.selectSuggestion(o,e)}setSelectedItem(e,o){let i=no(e,this.suggestions.length),n=this.suggestions[this.selectedItem],r=this.suggestions[i];n?.removeClass("is-selected"),r?.addClass("is-selected"),this.selectedItem=i,o&&r.scrollIntoView(!1)}},Ke=class{constructor(e,o){this.app=e,this.inputEl=o,this.scope=new Ko.Scope,this.suggestEl=createDiv("suggestion-container");let i=this.suggestEl.createDiv("suggestion");this.suggest=new Yt(this,i,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,o=this.getSuggestions(e);o.length>0&&(this.suggest.setSuggestions(o),this.open(this.app.dom.appContainerEl,this.inputEl))}open(e,o){this.app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=jt(o,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:i,instance:n})=>{let r=`${i.rects.reference.width+100}px`;i.styles.popper.width!==r&&(i.styles.popper.width=r,n.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){this.app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};var ct=class extends Ke{getSuggestions(e){let o=this.app.vault.getAllLoadedFiles(),i=[],n=e.toLowerCase();return o.forEach(r=>{r instanceof ke.TFile&&["md","canvas"].contains(r.extension)&&r.path.toLowerCase().contains(n)&&i.push(r)}),i}renderSuggestion(e,o){e.extension=="md"?o.setText(ee(e)):(o.setText(e.path.slice(0,-7)),o.insertAdjacentHTML("beforeend",'<div class="nav-file-tag" style="display:inline-block;vertical-align:middle">canvas</div>'))}selectSuggestion(e){this.inputEl.value=ee(e),this.inputEl.trigger("input"),this.close()}},dt=class extends Ke{getSuggestions(e){let o=Object.keys(this.app.internalPlugins.plugins.workspaces?.instance.workspaces),i=e.toLowerCase();return o.filter(n=>n.toLowerCase().contains(i))}renderSuggestion(e,o){o.setText(e)}selectSuggestion(e){this.inputEl.value=e,this.inputEl.trigger("input"),this.close()}},ut=class extends ke.FuzzySuggestModal{constructor(o){super(o.plugin.app);this.homepage=o.plugin.homepage,this.tab=o}getItems(){return Object.values(this.app.commands.commands)}getItemText(o){return o.name}onChooseItem(o){if(o.id==="homepage:open-homepage"){new ke.Notice("Really?");return}else this.homepage.data.commands||(this.homepage.data.commands=[]);this.homepage.data.commands.push(o.id),this.homepage.save(),this.tab.updateCommandBox()}};var qt={version:3,homepages:{[me]:{value:"Home",kind:"File",openOnStartup:!0,hasRibbonIcon:!0,openMode:"Replace all open notes",manualOpenMode:"Keep open notes",view:"Default view",revertView:!0,openWhenEmpty:!1,refreshDataview:!1,autoCreate:!0,autoScroll:!1,pin:!1,commands:[],alwaysApply:!1}},separateMobile:!1},$t=qt.homepages[me],dn=["Random file","Graph view",...St],mt=class extends W.PluginSettingTab{constructor(o,i){super(o,i);this.plugin=i,this.settings=i.settings}sanitiseNote(o){return o===null||o.match(/^\s*$/)!==null?null:(0,W.normalizePath)(o)}display(){let o=this.plugin.homepage.data.kind=="Workspace",i=tt(this.plugin),n=!1,r=document.createElement("article"),p=o?dt:ct;this.containerEl.empty(),this.elements={},r.id="nv-desc";let s=new W.Setting(this.containerEl).setName("Homepage").addDropdown(async a=>{for(let l of Object.values(_e)){if(!this.plugin.hasRequiredPlugin(l))if(l==this.plugin.homepage.data.kind)n=!0;else continue;let c=l;l=="Date-dependent file"&&(c="Moment (legacy)"),a.addOption(l,c)}a.setValue(this.plugin.homepage.data.kind),a.onChange(async l=>{this.plugin.homepage.data.kind=l,await this.plugin.homepage.save(),this.display()})});switch(s.settingEl.id="nv-main-setting",s.settingEl.append(r),this.plugin.homepage.data.kind){case"File":r.innerHTML="Enter a note or canvas to use.";break;case"Workspace":r.innerHTML="Enter an Obsidian workspace to use.";break;case"Graph view":r.innerHTML="Your graph view will be used.";break;case"Date-dependent file":r.innerHTML=`<span class="mod-warning">This type is deprecated and will eventually be removed. Use Daily/Weekly/Monthly/Yearly Note instead, which works natively with Daily and Periodic Notes.</span><br>
				Enter a note or canvas to use based on <a href="https://momentjs.com/docs/#/displaying/format/" target="_blank" rel="noopener">Moment date formatting</a>.<small> Surround words in <code>[brackets]</code> to include them unmodified.
				<br> Currently, your specification will produce: </small>`;break;case"Random file":r.innerHTML="A random note or canvas from your Obsidian folder will be selected.";break;case"Daily Note":r.innerHTML="Your Daily Note or Periodic Daily Note will be used.";break;case"Weekly Note":case"Monthly Note":case"Yearly Note":r.innerHTML=`Your Periodic ${this.plugin.homepage.data.kind} will be used.`;break}if(n&&r.createDiv({text:"The plugin required for this homepage type isn't available.",attr:{class:"mod-warning"}}),this.plugin.homepage.data.kind=="Date-dependent file"){let a=r.lastChild.createEl("b",{attr:{class:"u-pop"}});s.addMomentFormat(l=>l.setDefaultFormat("YYYY-MM-DD").setValue(this.plugin.homepage.data.value).onChange(async c=>{this.plugin.homepage.data.value=c,await this.plugin.homepage.save()}).setSampleEl(a))}else dn.includes(this.plugin.homepage.data.kind)?s.addText(a=>{a.setDisabled(!0)}):s.addText(a=>{new p(this.app,a.inputEl),a.setPlaceholder($t.value),a.setValue($t.value==this.plugin.homepage.data.value?"":this.plugin.homepage.data.value),a.onChange(async l=>{this.plugin.homepage.data.value=this.sanitiseNote(l)||$t.value,await this.plugin.homepage.save()})});this.addToggle("Open on startup","When launching Obsidian, open the homepage.","openOnStartup",a=>this.display()),i&&(this.elements.openOnStartup.descEl.createDiv({text:`This setting has been disabled, as it isn't compatible with Daily Notes' "Open daily note on startup" functionality. To use it, disable the Daily Notes setting.`,attr:{class:"mod-warning"}}),this.disableSetting("openOnStartup")),this.addToggle("Open when empty","When there are no tabs open, open the homepage.","openWhenEmpty"),this.addToggle("Use when opening normally","Use homepage settings when opening it normally, such as from a link or the file browser.","alwaysApply"),this.addToggle("Use ribbon icon","Show a little house on the ribbon, allowing you to quickly access the homepage.","hasRibbonIcon",a=>this.plugin.setIcon(a)),new W.Setting(this.containerEl).setName("Separate mobile homepage").setDesc("For mobile devices, store the homepage and its settings separately.").addToggle(a=>a.setValue(this.plugin.settings.separateMobile).onChange(async l=>{this.plugin.settings.separateMobile=l,this.plugin.homepage=this.plugin.getHomepage(),await this.plugin.saveSettings(),this.display()})),this.addHeading("Commands","commandsHeading"),this.containerEl.createDiv({cls:"nv-command-desc setting-item-description",text:"Select commands that will be executed when opening the homepage."}),this.commandBox=this.containerEl.createDiv({cls:"nv-command-box"}),this.updateCommandBox(),this.addHeading("Vault environment","vaultHeading"),this.addDropdown("Opening method","Determine how extant tabs and views are affected on startup.","openMode",it),this.addDropdown("Manual opening method","Determine how extant tabs and views are affected when opening with commands or the ribbon button.","manualOpenMode",it),this.addToggle("Auto-create","If the homepage doesn't exist, create a note with the specified name.","autoCreate"),this.addToggle("Pin","Pin the homepage when opening.","pin"),this.addHeading("Opened view","paneHeading"),this.addDropdown("Homepage view","Choose what view to open the homepage in.","view",Dt),this.addToggle("Revert view on close","When navigating away from the homepage, restore the default view.","revertView"),this.addToggle("Auto-scroll","When opening the homepage, scroll to the bottom and focus on the last line.","autoScroll"),"dataview"in this.plugin.communityPlugins&&(this.addToggle("Refresh Dataview","Always attempt to reload Dataview views when opening the homepage.","refreshDataview"),this.elements.refreshDataview.descEl.createDiv({text:"Requires Dataview auto-refresh to be enabled.",attr:{class:"mod-warning"}})),W.Platform.isMobile||new W.ButtonComponent(this.containerEl).setButtonText("Copy debug info").setClass("nv-debug-button").onClick(async()=>await this.copyDebugInfo()),o&&this.disableSettings("openWhenEmpty","alwaysApply","vaultHeading","openMode","manualOpenMode","autoCreate","pin"),(o||this.plugin.homepage.data.kind=="Graph view")&&this.disableSettings("paneHeading","view","revertView","autoScroll","refreshDataview"),(!this.plugin.homepage.data.openOnStartup||i)&&this.disableSetting("openMode"),St.includes(this.plugin.homepage.data.kind)&&this.disableSetting("autoCreate")}disableSetting(o){this.elements[o]?.settingEl.setAttribute("nv-greyed","")}disableSettings(...o){o.forEach(i=>this.disableSetting(i))}addHeading(o,i){let n=new W.Setting(this.containerEl).setHeading().setName(o);this.elements[i]=n}addDropdown(o,i,n,r,p){let s=new W.Setting(this.containerEl).setName(o).setDesc(i).addDropdown(async a=>{for(let l of Object.values(r))a.addOption(l,l);a.setValue(this.plugin.homepage.data[n]),a.onChange(async l=>{this.plugin.homepage.data[n]=l,await this.plugin.homepage.save(),p&&p(l)})});this.elements[n]=s}addToggle(o,i,n,r){let p=new W.Setting(this.containerEl).setName(o).setDesc(i).addToggle(s=>s.setValue(this.plugin.homepage.data[n]).onChange(async a=>{this.plugin.homepage.data[n]=a,await this.plugin.homepage.save(),r&&r(a)}));this.elements[n]=p}updateCommandBox(){this.commandBox.innerHTML="";for(let[o,i]of this.plugin.homepage.data.commands.entries()){let n=this.app.commands.findCommand(i);if(!n)continue;let r=this.commandBox.createDiv({cls:"nv-command-pill",text:n.name});new W.ButtonComponent(r).setIcon("trash-2").setClass("clickable-icon").onClick(()=>{this.plugin.homepage.data.commands.splice(o,1),this.plugin.homepage.save(),this.updateCommandBox()})}new W.ButtonComponent(this.commandBox).setClass("nv-command-add-button").setButtonText("Add...").onClick(()=>{new ut(this).open()})}async copyDebugInfo(){let o=this.app.vault.config,i={...this.settings,_defaultViewMode:o.defaultViewMode||"default",_livePreview:o.livePreview||"default",_focusNewTab:o.focusNewTab||"default",_plugins:Object.keys(this.plugin.communityPlugins),_internalPlugins:Object.values(this.plugin.internalPlugins).flatMap(n=>n.enabled?[n.instance.id]:[]),_obsidianVersion:window.electron.ipcRenderer.sendSync("version")};await navigator.clipboard.writeText(JSON.stringify(i)),new W.Notice("Copied homepage debug information to clipboard")}};var un='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><path d="M10.025 21H6v-7H3v-1.5L12 3l9 9.5V14h-3v7h-4v-7h-3.975v7Z" style="fill:none;stroke:currentColor;stroke-width:2px"/></svg>',ft=class extends se.Plugin{constructor(){super(...arguments);this.loaded=!1;this.executing=!1;this.onLayoutChange=async()=>{this.homepage.data.revertView&&await this.homepage.revertView(),this.homepage.data.openWhenEmpty&&await this.homepage.openWhenEmpty(),this.homepage.data.alwaysApply&&await this.homepage.apply()}}async onload(){let o=document.body.querySelector(".progress-bar")!==null;this.settings=await this.loadSettings(),this.internalPlugins=this.app.internalPlugins.plugins,this.communityPlugins=this.app.plugins.plugins,this.homepage=this.getHomepage(),this.app.workspace.onLayoutReady(async()=>{let i=this.communityPlugins["new-tab-default-page"];i&&(i._checkForNewTab=i.checkForNewTab,i.checkForNewTab=async n=>{if(!(this&&this.executing))return await i._checkForNewTab(n)}),o&&this.homepage.data.openOnStartup&&await this.homepage.open(),this.loaded=!0}),(0,se.addIcon)("homepage",un),this.setIcon(this.homepage.data.hasRibbonIcon),this.registerEvent(this.app.workspace.on("layout-change",this.onLayoutChange)),this.addSettingTab(new mt(this.app,this)),this.addCommand({id:"open-homepage",name:"Open homepage",callback:()=>this.homepage.open()}),console.log(`Homepage: ${this.homepage.data.value} (method: ${this.homepage.data.openMode}, view: ${this.homepage.data.view}, kind: ${this.homepage.data.kind})`)}async onunload(){this.app.workspace.off("layout-change",this.onLayoutChange);let o=this.communityPlugins["new-tab-default-page"];o&&(o.checkForNewTab=o._checkForNewTab)}getHomepage(){return this.settings.separateMobile&&se.Platform.isMobile?(ot in this.settings.homepages||(this.settings.homepages[ot]={...this.settings.homepages[me]}),new Be(ot,this)):new Be(me,this)}async loadSettings(){let o=await this.loadData();if(!o||o.version!==2)return Object.assign({},qt,o);{let i={version:3,homepages:{},separateMobile:!1},n=o;return o.workspaceEnabled?(n.value=n.workspace,n.kind="Workspace"):o.useMoment?(n.value=n.momentFormat,n.kind="Date-dependent file"):(n.value=n.defaultNote,n.kind="File"),n.commands=[],delete n.workspace,delete n.momentFormat,delete n.defaultNote,delete n.useMoment,delete n.workspaceEnabled,i.homepages[me]=n,i}}async saveSettings(){await this.saveData(this.settings)}setIcon(o){o?this.addRibbonIcon("homepage","Open homepage",i=>this.homepage.open(i.button==1||i.button==2||se.Keymap.isModifier(i,"Mod"))).setAttribute("id","nv-homepage-icon"):document.getElementById("nv-homepage-icon")?.remove()}hasRequiredPlugin(o){switch(o){case"Workspace":return this.internalPlugins.workspaces?.enabled;case"Graph view":return this.internalPlugins.graph?.enabled;case"Daily Note":case"Weekly Note":case"Monthly Note":case"Yearly Note":return Oo(o,this);default:return!0}}};
